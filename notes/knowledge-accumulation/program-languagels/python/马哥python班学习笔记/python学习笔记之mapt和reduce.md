在学习map/reduce之前先明白一个概念，这就是高阶函数，高阶函数就是把函数当作参数来传入另一个函数，这样的函数就叫高阶函数。高阶函数的目的就是让函数的参数能够接收别的函数。个人理解就是一个函数中定义参数的部份是另一个函数。

# map()

`map()`是一个函数，这个函数接收两个参数，第一个参数是一个函数，第二个参数是一个可序列化的对象，map()把第一个参数(函数)依次作用到第二个参数(序列)的每一个元素中，并把结果返回为一个新的list返回，以一个例子来说明，如下：

定义一个能计算x平方的函数f()
```py
>>> def f(x):
...     return x * x
...
```

测试函数f()是否能正常运行

```py
>>> f(3)
9
```

采用map()来计算[1,2,3,4,5]中每个元素的平方值，并会以一个list返回

```py
>>> map(f,[1,2,3,4,5])
[1, 4, 9, 16, 25]
```

当然不用map()，而采用循环的方式也能达到相同的效果，如下：

```py
>>> L = []
>>> for i in [1,2,3,4,5]:
...     L.append(f(i))
...
>>> L
[1, 4, 9, 16, 25]
```

但用循环的方式不能一眼就看出是把f(x)这个函数作用在一个列表上的生一个元素，最后返回一个列表。而采用map()高阶函数就能一眼看出，并且map()高阶函数把其他函数封闭在内部，把运算规则抽象了。

再来看一个map()的例子，把一个列表中的整形元素全部转换成字符型，代码如下：

```py
>>> L
[1, 4, 9, 16, 25]
>>> type(L[0])
<type 'int'>
>>> map(str,L)
['1', '4', '9', '16', '25']
```

采用map()这个高阶函数的确减少了代码量。

# reduce()

reduce()这个函数接收两个参数，第一个参数是一个函数，第二个参数是一个可序列化的对象，reduce()把第一个参数(函数)依次作用到第二个参数(序列)的每一个元素中，reduce()把取得的结果和序列中的下一个元素继续做累积计算，以一个例子来说明：

例子：把[1,2,3,4,5]转换成整数12345

```py
>>> def fn(x,y):
...     return x * 10 +y
...
>>> fn(2,3)
23
>>> reduce(fn,[1,2,3,4,5])
12345
```

下边再来写一个能把任何一个字符型的数字转换成整形的函数，如下：

```py
>>> def char2num(s):
...     return {'0':0,'1':1,'2':2,'3':3,'4':4,'5':5,'6':6,'7':7,'8':8,'9':9}[s]
...
>>> char2num('2')
2
>>> char2num('5')
5
```

有了上边这个函数，再结合fn(x,y)、map()与reduce()就可以组合成一个能够把字符型的数字转换成整型，如下：

```py
>>> def fn(x,y):
...     return x * 10 +y
...
>>> reduce(fn,map(char2num,'1456'))
1456
```

这样就把字符型的"1456"转换成了整型的1456。

最后把上边的各个代码整理成一个函数，如下：

```py
>>> def str2int(s):
...          def fn(x,y):
...              return x * 10 +y
...          def char2num(s):
...              return {'0':0,'1':1,'2':2,'3':3,'4':4,'5':5,'6':6,'7':7,'8':8,'9':9}[s]
...          return reduce(fn,map(char2num,s))
...
>>> str2int('2378')
2378
```
